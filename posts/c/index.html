<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>C/C++杂项知识点 | JuicyMio's Blog</title>
<meta name=keywords content><meta name=description content='用于记录一些比较奇怪/少见的c语法/易错易忘点/常见问题, 以备考试等用途
杂项中的杂项

编译没过先看报错信息, 不认识英文请善用翻译
如何提问: 先使用搜索引擎. 如果一定要问人, 附上全部 全部 全部 代码, 以及报错信息 报错信息 报错信息. 和一组出错了的输入输出, 以及注释或你对代码的解释. 因为阅读别人的代码是一件很烧脑的事.

错误示范: 代码截图, 我错哪了?
不要拍屏


查错技巧: 学习使用gdb, 设置断点并查看相关变量的值. 一个低配但很快的方法是用printf输出关键变量
关于CSDN: 虽然内容质量感人被StackOverflow等英文网站甩了十条街, 但还是有一些值得一看的文章的. 而且哪怕用百度查到csdn文章看了也比啥也不查直接问强.
输入数据之后卡住了怎么办: 查看你的代码里是否有死循环, 或者你的输入格式是否合法.
输入输出对不上: 看看格式控制符跟变量类型能否对应, 常见错误是用%f读入double类型变量.
报错信息里有cannot open output file .../*.exe: permission denied或者"无法打开xxx程序进行写入"之类的东西: 你之前的程序没关掉
输出了奇怪的数字: 大概率数组越界
Segmentation fault: 访问了不可访问的内存. 常见原因是数组越界, 指针漂移, 缓冲区溢出, 数组开太大爆栈&mldr;
带缺省值的参数需要放在后面, 这样在调用函数的时候就可以不写那个参数.
放在前面编译会报错.

int f(int a = 0, int b); // wrong
int f(int b, int a = 0); // right


字符串占用的空间要算上  &lsquo;\0&rsquo;


关于锟斤拷烫烫烫等成因:
手持两把锟斤拷，口中疾呼烫烫烫,脚踏千朵屯屯屯，笑看万物锘锘锘

锟斤拷


源于GBK字符集和Unicode字符集之间的转换问题。Unicode和老编码体系的转化过程中，肯定有一些字，用Unicode是没法表示的，Unicode官方用了一个占位符来表示这些文字，这就是：U+FFFD REPLACEMENT CHARACTER。那么U+FFFD的UTF-8编码出来，恰好是 &lsquo;\xef\xbf\xbd&rsquo;。如果这个&rsquo;\xef\xbf\xbd&rsquo;，重复多次，例如 &lsquo;\xef\xbf\xbd\xef\xbf\xbd&rsquo;，然后放到GBK/CP936/GB2312/GB18030的环境中显示的话，一个汉字2个字节，最终的结果就是：锟斤拷——锟(0xEFBF)，斤（0xBDEF），拷（0xBFBD）。'><meta name=author content="JuicyMio"><link rel=canonical href=https://juicymio.github.io/posts/c/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.fc220c15db4aef0318bbf30adc45d33d4d7c88deff3238b23eb255afdc472ca6.css integrity="sha256-/CIMFdtK7wMYu/MK3EXTPU18iN7/MjiyPrJVr9xHLKY=" rel="preload stylesheet" as=style><link rel=icon href=https://juicymio.github.io/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=https://juicymio.github.io/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://juicymio.github.io/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://juicymio.github.io/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://juicymio.github.io/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://juicymio.github.io/posts/c/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="C/C++杂项知识点"><meta property="og:description" content='用于记录一些比较奇怪/少见的c语法/易错易忘点/常见问题, 以备考试等用途
杂项中的杂项

编译没过先看报错信息, 不认识英文请善用翻译
如何提问: 先使用搜索引擎. 如果一定要问人, 附上全部 全部 全部 代码, 以及报错信息 报错信息 报错信息. 和一组出错了的输入输出, 以及注释或你对代码的解释. 因为阅读别人的代码是一件很烧脑的事.

错误示范: 代码截图, 我错哪了?
不要拍屏


查错技巧: 学习使用gdb, 设置断点并查看相关变量的值. 一个低配但很快的方法是用printf输出关键变量
关于CSDN: 虽然内容质量感人被StackOverflow等英文网站甩了十条街, 但还是有一些值得一看的文章的. 而且哪怕用百度查到csdn文章看了也比啥也不查直接问强.
输入数据之后卡住了怎么办: 查看你的代码里是否有死循环, 或者你的输入格式是否合法.
输入输出对不上: 看看格式控制符跟变量类型能否对应, 常见错误是用%f读入double类型变量.
报错信息里有cannot open output file .../*.exe: permission denied或者"无法打开xxx程序进行写入"之类的东西: 你之前的程序没关掉
输出了奇怪的数字: 大概率数组越界
Segmentation fault: 访问了不可访问的内存. 常见原因是数组越界, 指针漂移, 缓冲区溢出, 数组开太大爆栈&mldr;
带缺省值的参数需要放在后面, 这样在调用函数的时候就可以不写那个参数.
放在前面编译会报错.

int f(int a = 0, int b); // wrong
int f(int b, int a = 0); // right


字符串占用的空间要算上  &lsquo;\0&rsquo;


关于锟斤拷烫烫烫等成因:
手持两把锟斤拷，口中疾呼烫烫烫,脚踏千朵屯屯屯，笑看万物锘锘锘

锟斤拷


源于GBK字符集和Unicode字符集之间的转换问题。Unicode和老编码体系的转化过程中，肯定有一些字，用Unicode是没法表示的，Unicode官方用了一个占位符来表示这些文字，这就是：U+FFFD REPLACEMENT CHARACTER。那么U+FFFD的UTF-8编码出来，恰好是 &lsquo;\xef\xbf\xbd&rsquo;。如果这个&rsquo;\xef\xbf\xbd&rsquo;，重复多次，例如 &lsquo;\xef\xbf\xbd\xef\xbf\xbd&rsquo;，然后放到GBK/CP936/GB2312/GB18030的环境中显示的话，一个汉字2个字节，最终的结果就是：锟斤拷——锟(0xEFBF)，斤（0xBDEF），拷（0xBFBD）。'><meta property="og:type" content="article"><meta property="og:url" content="https://juicymio.github.io/posts/c/"><meta property="og:image" content="https://juicymio.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-10-12T22:32:18+08:00"><meta property="article:modified_time" content="2022-10-12T22:32:18+08:00"><meta property="og:site_name" content="JuicyMio's Blog"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://juicymio.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="C/C++杂项知识点"><meta name=twitter:description content='用于记录一些比较奇怪/少见的c语法/易错易忘点/常见问题, 以备考试等用途
杂项中的杂项

编译没过先看报错信息, 不认识英文请善用翻译
如何提问: 先使用搜索引擎. 如果一定要问人, 附上全部 全部 全部 代码, 以及报错信息 报错信息 报错信息. 和一组出错了的输入输出, 以及注释或你对代码的解释. 因为阅读别人的代码是一件很烧脑的事.

错误示范: 代码截图, 我错哪了?
不要拍屏


查错技巧: 学习使用gdb, 设置断点并查看相关变量的值. 一个低配但很快的方法是用printf输出关键变量
关于CSDN: 虽然内容质量感人被StackOverflow等英文网站甩了十条街, 但还是有一些值得一看的文章的. 而且哪怕用百度查到csdn文章看了也比啥也不查直接问强.
输入数据之后卡住了怎么办: 查看你的代码里是否有死循环, 或者你的输入格式是否合法.
输入输出对不上: 看看格式控制符跟变量类型能否对应, 常见错误是用%f读入double类型变量.
报错信息里有cannot open output file .../*.exe: permission denied或者"无法打开xxx程序进行写入"之类的东西: 你之前的程序没关掉
输出了奇怪的数字: 大概率数组越界
Segmentation fault: 访问了不可访问的内存. 常见原因是数组越界, 指针漂移, 缓冲区溢出, 数组开太大爆栈&mldr;
带缺省值的参数需要放在后面, 这样在调用函数的时候就可以不写那个参数.
放在前面编译会报错.

int f(int a = 0, int b); // wrong
int f(int b, int a = 0); // right


字符串占用的空间要算上  &lsquo;\0&rsquo;


关于锟斤拷烫烫烫等成因:
手持两把锟斤拷，口中疾呼烫烫烫,脚踏千朵屯屯屯，笑看万物锘锘锘

锟斤拷


源于GBK字符集和Unicode字符集之间的转换问题。Unicode和老编码体系的转化过程中，肯定有一些字，用Unicode是没法表示的，Unicode官方用了一个占位符来表示这些文字，这就是：U+FFFD REPLACEMENT CHARACTER。那么U+FFFD的UTF-8编码出来，恰好是 &lsquo;\xef\xbf\xbd&rsquo;。如果这个&rsquo;\xef\xbf\xbd&rsquo;，重复多次，例如 &lsquo;\xef\xbf\xbd\xef\xbf\xbd&rsquo;，然后放到GBK/CP936/GB2312/GB18030的环境中显示的话，一个汉字2个字节，最终的结果就是：锟斤拷——锟(0xEFBF)，斤（0xBDEF），拷（0xBFBD）。'><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://juicymio.github.io/posts/"},{"@type":"ListItem","position":2,"name":"C/C++杂项知识点","item":"https://juicymio.github.io/posts/c/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"C/C++杂项知识点","name":"C\/C\u002b\u002b杂项知识点","description":"用于记录一些比较奇怪/少见的c语法/易错易忘点/常见问题, 以备考试等用途\n杂项中的杂项 编译没过先看报错信息, 不认识英文请善用翻译 如何提问: 先使用搜索引擎. 如果一定要问人, 附上全部 全部 全部 代码, 以及报错信息 报错信息 报错信息. 和一组出错了的输入输出, 以及注释或你对代码的解释. 因为阅读别人的代码是一件很烧脑的事. 错误示范: 代码截图, 我错哪了? 不要拍屏 查错技巧: 学习使用gdb, 设置断点并查看相关变量的值. 一个低配但很快的方法是用printf输出关键变量 关于CSDN: 虽然内容质量感人被StackOverflow等英文网站甩了十条街, 但还是有一些值得一看的文章的. 而且哪怕用百度查到csdn文章看了也比啥也不查直接问强. 输入数据之后卡住了怎么办: 查看你的代码里是否有死循环, 或者你的输入格式是否合法. 输入输出对不上: 看看格式控制符跟变量类型能否对应, 常见错误是用%f读入double类型变量. 报错信息里有cannot open output file .../*.exe: permission denied或者\u0026quot;无法打开xxx程序进行写入\u0026quot;之类的东西: 你之前的程序没关掉 输出了奇怪的数字: 大概率数组越界 Segmentation fault: 访问了不可访问的内存. 常见原因是数组越界, 指针漂移, 缓冲区溢出, 数组开太大爆栈\u0026hellip; 带缺省值的参数需要放在后面, 这样在调用函数的时候就可以不写那个参数. 放在前面编译会报错. int f(int a = 0, int b); // wrong int f(int b, int a = 0); // right 字符串占用的空间要算上 \u0026lsquo;\\0\u0026rsquo;\n关于锟斤拷烫烫烫等成因: 手持两把锟斤拷，口中疾呼烫烫烫,脚踏千朵屯屯屯，笑看万物锘锘锘\n锟斤拷 源于GBK字符集和Unicode字符集之间的转换问题。Unicode和老编码体系的转化过程中，肯定有一些字，用Unicode是没法表示的，Unicode官方用了一个占位符来表示这些文字，这就是：U+FFFD REPLACEMENT CHARACTER。那么U+FFFD的UTF-8编码出来，恰好是 \u0026lsquo;\\xef\\xbf\\xbd\u0026rsquo;。如果这个\u0026rsquo;\\xef\\xbf\\xbd\u0026rsquo;，重复多次，例如 \u0026lsquo;\\xef\\xbf\\xbd\\xef\\xbf\\xbd\u0026rsquo;，然后放到GBK/CP936/GB2312/GB18030的环境中显示的话，一个汉字2个字节，最终的结果就是：锟斤拷——锟(0xEFBF)，斤（0xBDEF），拷（0xBFBD）。\n","keywords":[],"articleBody":"用于记录一些比较奇怪/少见的c语法/易错易忘点/常见问题, 以备考试等用途\n杂项中的杂项 编译没过先看报错信息, 不认识英文请善用翻译 如何提问: 先使用搜索引擎. 如果一定要问人, 附上全部 全部 全部 代码, 以及报错信息 报错信息 报错信息. 和一组出错了的输入输出, 以及注释或你对代码的解释. 因为阅读别人的代码是一件很烧脑的事. 错误示范: 代码截图, 我错哪了? 不要拍屏 查错技巧: 学习使用gdb, 设置断点并查看相关变量的值. 一个低配但很快的方法是用printf输出关键变量 关于CSDN: 虽然内容质量感人被StackOverflow等英文网站甩了十条街, 但还是有一些值得一看的文章的. 而且哪怕用百度查到csdn文章看了也比啥也不查直接问强. 输入数据之后卡住了怎么办: 查看你的代码里是否有死循环, 或者你的输入格式是否合法. 输入输出对不上: 看看格式控制符跟变量类型能否对应, 常见错误是用%f读入double类型变量. 报错信息里有cannot open output file .../*.exe: permission denied或者\"无法打开xxx程序进行写入\"之类的东西: 你之前的程序没关掉 输出了奇怪的数字: 大概率数组越界 Segmentation fault: 访问了不可访问的内存. 常见原因是数组越界, 指针漂移, 缓冲区溢出, 数组开太大爆栈… 带缺省值的参数需要放在后面, 这样在调用函数的时候就可以不写那个参数. 放在前面编译会报错. int f(int a = 0, int b); // wrong int f(int b, int a = 0); // right 字符串占用的空间要算上 ‘\\0’\n关于锟斤拷烫烫烫等成因: 手持两把锟斤拷，口中疾呼烫烫烫,脚踏千朵屯屯屯，笑看万物锘锘锘\n锟斤拷 源于GBK字符集和Unicode字符集之间的转换问题。Unicode和老编码体系的转化过程中，肯定有一些字，用Unicode是没法表示的，Unicode官方用了一个占位符来表示这些文字，这就是：U+FFFD REPLACEMENT CHARACTER。那么U+FFFD的UTF-8编码出来，恰好是 ‘\\xef\\xbf\\xbd’。如果这个’\\xef\\xbf\\xbd’，重复多次，例如 ‘\\xef\\xbf\\xbd\\xef\\xbf\\xbd’，然后放到GBK/CP936/GB2312/GB18030的环境中显示的话，一个汉字2个字节，最终的结果就是：锟斤拷——锟(0xEFBF)，斤（0xBDEF），拷（0xBFBD）。\n烫烫烫 VS/VC debug模式下栈内未初始化的内存会全部被设置成0xcc, 这个0xcc是INT3中断指令的机器码, 所以执行这块内存就会中断程序. VS调试器默认字符集是MBCS, 其中0xcccc是’烫’字, 所以…… INT3断点是断点的一种，在诸如Ollydbg中的快捷键是F2，是一种很常用的断点类型。INT3指令的机器码为CC，所以通常也称之为CC指令。当被调试进程执行INT3指令导致一个异常时，调试器就会捕捉这个异常从而停在断点处，然后将断点处的指令恢复成原来的指令。当然，如果自己写调试器，也可以用其他一些指令代替INT3指令来触发异常。\n注: 关于INT3指令的问题可以查阅内中断相关知识, 简单来讲执行INT n指令会调用编号n对应的中断处理程序, 而INT 3是x86系列cpu专门用于调试的指令, 它的中断处理程序会寻找调试器并将控制转交给调试器, 这些知识在汇编语言课里就会学到.\n3. 屯屯屯 由于相似的原因, 堆中空间的缺省值是0xcd, 也是一个中断指令的机器码, 0xcdcd是屯 4. 锘锘锘 BOM 是 Byte Order Mark 的缩写。是UTF编码方案里用于标识编码的标准标记，在UTF-16里本来是FF FE，变成UTF-8就成了EF BB BF。这个标记是可选的，因为UTF8字节没有顺序，所以它可以被用来检测一个字节流是否是UTF-8编码的。 常见原因是在记事本里保存了代码, 因为记事本用utf-8编码, 而且保存自动加BOM 锘EFBB 匡BFEF 豢BBBF 5. 葺葺葺 虽然诗里没有, 但堆上申请后释放空间后缺省值是0xdd, 0xdddd是葺 虽然这个问题在中文环境里令人尤其迷惑, 但英文使用者同样对未初始化的内存为何是这些值感到好奇. When and why will a compiler initialise memory to 0xCD, 0xDD, etc. on malloc/free/new/delete?\n\u003c优先级比=高, 这使\nif(x = f() \u003c 0) 并不会像看起来那样工作, 它会首先执行f()\u003c0, 最后被赋值给x的是这个关系运算符的真(1)假(0).\n宏/函数/内联函数 参数: 宏的参数在展开时不经任何处理直接进行字符串替换, 函数的参数会进行类型检查, 计算后由实参传值到形参. 形参是函数内的局部变量, 占用栈空间. 宏的展开由预处理器处理, 在预编译(编译之前)时进行, 直接用宏体替换宏名, 占用预编译时间. 函数在执行时才会被调用. 调用时需要保护现场(保存调用者保存的寄存器), 进入函数, 返回主调函数, 恢复现场(恢复寄存器). 宏会有各种副作用, 这使它难于调试 由于简单的展开, ++ –运算符可能会执行多次 同样由于简单的展开, 如果不加足够多的括号, 会出很多优先级的问题. 但宏也有很多好处 可以在并不直接允许重载的C语言里实现简单的重载(不过用指针等方法也可以实现) 对于简单而重复多次的功能, 可以大大减小开销, 提升速度 实现其他奇技淫巧 内联函数(inline) 由编译器处理 用类似宏的方法, 将函数代码直接嵌入到调用处, 不能有循环, 选择等任何复杂结构, 可以节约开销的同时防止宏的一些副作用. 如果函数不够简单, 编译器会拒绝内联. 在开了某些优化时编译器会自动将一些简单的函数内联. 形参出现在函数定义中用来占位,只有在调用时分配内存. 实参出现在函数调用时.在函数调用时实参的值被传递给形参. C/C++的’\\n’和std::endl是否刷新缓冲区的问题 如果cout输出到一个交互设备(interactive device), 如终端(terminal), 它们通常是行缓冲而非完全缓冲的, 所以’\\n’会刷新缓冲区, 但如文件这种完全缓冲的目标, ‘\\n’不会刷新缓冲区. 我提出这个问题并空想一番之后被M4tsuri丢了两个StackOverflow链接, 我去面壁了…\nDoes printf always flush the buffer on encountering a newline\ndoes new line character also flush the buffer\n","wordCount":"225","inLanguage":"en","image":"https://juicymio.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E","datePublished":"2022-10-12T22:32:18+08:00","dateModified":"2022-10-12T22:32:18+08:00","author":{"@type":"Person","name":"JuicyMio"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://juicymio.github.io/posts/c/"},"publisher":{"@type":"Organization","name":"JuicyMio's Blog","logo":{"@type":"ImageObject","url":"https://juicymio.github.io/%3Clink%20/%20abs%20url%3E"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://juicymio.github.io/ accesskey=h title="Home (Alt + H)"><img src=https://juicymio.github.io/apple-touch-icon.png alt aria-label=logo height=35>Home</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://juicymio.github.io/posts/ title=posts><span>posts</span></a></li><li><a href=https://juicymio.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://juicymio.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://juicymio.github.io/friends/ title=friends><span>friends</span></a></li><li><a href=https://juicymio.github.io/about/ title=about><span>about</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://juicymio.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://juicymio.github.io/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">C/C++杂项知识点</h1><div class=post-meta><span title='2022-10-12 22:32:18 +0800 CST'>October 12, 2022</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;225 words&nbsp;·&nbsp;JuicyMio&nbsp;|&nbsp;<a href=https://github.com/%3cpath_to_repo%3e/content/posts/c.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#杂项中的杂项>杂项中的杂项</a></li><li><a href=#cc的n和stdendl是否刷新缓冲区的问题>C/C++的&rsquo;\n&rsquo;和std::endl是否刷新缓冲区的问题</a></li></ul></nav></div></details></div><div class=post-content><p>用于记录一些比较奇怪/少见的c语法/易错易忘点/常见问题, 以备考试等用途</p><h2 id=杂项中的杂项>杂项中的杂项<a hidden class=anchor aria-hidden=true href=#杂项中的杂项>#</a></h2><ul><li><strong>编译没过先看报错信息, 不认识英文请善用翻译</strong></li><li>如何提问: 先使用搜索引擎. 如果一定要问人, 附上<strong>全部 全部 全部</strong> 代码, 以及<strong>报错信息 报错信息 报错信息</strong>. 和一组出错了的输入输出, 以及注释或你对代码的解释. 因为阅读别人的代码是一件很烧脑的事.<ul><li>错误示范: 代码截图, 我错哪了?</li><li><strong>不要拍屏</strong></li></ul></li><li>查错技巧: 学习使用gdb, 设置断点并查看相关变量的值. 一个低配但很快的方法是用printf输出关键变量</li><li>关于CSDN: 虽然内容质量感人被StackOverflow等英文网站甩了十条街, 但还是有一些值得一看的文章的. 而且哪怕用百度查到csdn文章看了也比啥也不查直接问强.</li><li>输入数据之后卡住了怎么办: 查看你的代码里是否有死循环, 或者你的输入格式是否合法.</li><li>输入输出对不上: 看看格式控制符跟变量类型能否对应, 常见错误是用<code>%f</code>读入<code>double</code>类型变量.</li><li>报错信息里有<code>cannot open output file .../*.exe: permission denied</code>或者"无法打开xxx程序进行写入"之类的东西: 你之前的程序没关掉</li><li>输出了奇怪的数字: 大概率数组越界</li><li>Segmentation fault: 访问了不可访问的内存. 常见原因是数组越界, 指针漂移, 缓冲区溢出, 数组开太大爆栈&mldr;</li><li>带缺省值的参数需要放在后面, 这样在调用函数的时候就可以不写那个参数.
放在前面编译会报错.</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>int</span> <span class=nf>f</span><span class=p>(</span><span class=kt>int</span> <span class=n>a</span> <span class=o>=</span> <span class=mi>0</span><span class=p>,</span> <span class=kt>int</span> <span class=n>b</span><span class=p>);</span> <span class=c1>// wrong
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kt>int</span> <span class=nf>f</span><span class=p>(</span><span class=kt>int</span> <span class=n>b</span><span class=p>,</span> <span class=kt>int</span> <span class=n>a</span> <span class=o>=</span> <span class=mi>0</span><span class=p>);</span> <span class=c1>// right
</span></span></span></code></pre></div><ul><li><p>字符串占用的空间要算上 &lsquo;\0&rsquo;</p></li><li><p>关于锟斤拷烫烫烫等成因:
<strong>手持两把锟斤拷，口中疾呼烫烫烫,脚踏千朵屯屯屯，笑看万物锘锘锘</strong></p><ol><li>锟斤拷</li></ol><blockquote><p>源于GBK字符集和Unicode字符集之间的转换问题。Unicode和老编码体系的转化过程中，肯定有一些字，用Unicode是没法表示的，Unicode官方用了一个占位符来表示这些文字，这就是：U+FFFD REPLACEMENT CHARACTER。那么U+FFFD的UTF-8编码出来，恰好是 &lsquo;\xef\xbf\xbd&rsquo;。如果这个&rsquo;\xef\xbf\xbd&rsquo;，重复多次，例如 &lsquo;\xef\xbf\xbd\xef\xbf\xbd&rsquo;，然后放到GBK/CP936/GB2312/GB18030的环境中显示的话，一个汉字2个字节，最终的结果就是：锟斤拷——锟(0xEFBF)，斤（0xBDEF），拷（0xBFBD）。</p></blockquote><ol start=2><li>烫烫烫
VS/VC debug模式下栈内未初始化的内存会全部被设置成0xcc, 这个0xcc是INT3中断指令的机器码, 所以执行这块内存就会中断程序.
VS调试器默认字符集是MBCS, 其中0xcccc是&rsquo;烫&rsquo;字, 所以&mldr;&mldr;</li></ol><blockquote><p>INT3断点是断点的一种，在诸如Ollydbg中的快捷键是F2，是一种很常用的断点类型。INT3指令的<a href="https://baike.baidu.com/item/%E6%9C%BA%E5%99%A8%E7%A0%81?fromModule=lemma_inlink">机器码</a>为CC，所以通常也称之为CC指令。当被调试进程执行INT3指令导致一个异常时，调试器就会捕捉这个异常从而停在断点处，然后将断点处的指令恢复成原来的指令。当然，如果自己写调试器，也可以用其他一些指令代替INT3指令来触发异常。</p></blockquote><p>注: 关于INT3指令的问题可以查阅内中断相关知识, 简单来讲执行INT n指令会调用编号n对应的中断处理程序, 而INT 3是x86系列cpu专门用于调试的指令, 它的中断处理程序会寻找调试器并将控制转交给调试器, 这些知识在汇编语言课里就会学到.<br>3. 屯屯屯
由于相似的原因, 堆中空间的缺省值是0xcd, 也是一个中断指令的机器码, 0xcdcd是屯
4. 锘锘锘
BOM 是 Byte Order Mark 的缩写。是UTF编码方案里用于标识编码的标准标记，在UTF-16里本来是FF FE，变成UTF-8就成了EF BB BF。这个标记是可选的，因为UTF8字节没有顺序，所以它可以被用来检测一个字节流是否是UTF-8编码的。
常见原因是在记事本里保存了代码, 因为记事本用utf-8编码, 而且保存自动加BOM
锘EFBB
匡BFEF
豢BBBF
5. 葺葺葺
虽然诗里没有, 但堆上申请后释放空间后缺省值是0xdd, 0xdddd是葺
虽然这个问题在中文环境里令人尤其迷惑, 但英文使用者同样对未初始化的内存为何是这些值感到好奇.
<a href=https://stackoverflow.com/questions/370195/when-and-why-will-a-compiler-initialise-memory-to-0xcd-0xdd-etc-on-malloc-fre>When and why will a compiler initialise memory to 0xCD, 0xDD, etc. on malloc/free/new/delete?</a></p></li><li><p><code>&lt;</code>优先级比<code>=</code>高, 这使</p></li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=k>if</span><span class=p>(</span><span class=n>x</span> <span class=o>=</span> <span class=nf>f</span><span class=p>()</span> <span class=o>&lt;</span> <span class=mi>0</span><span class=p>)</span>
</span></span></code></pre></div><p>并不会像看起来那样工作, 它会首先执行<code>f()&lt;0</code>, 最后被赋值给x的是这个关系运算符的真(1)假(0).</p><ul><li>宏/函数/内联函数<ul><li>参数: 宏的参数在展开时不经任何处理直接进行字符串替换, 函数的参数会进行类型检查, 计算后由实参传值到形参. 形参是函数内的局部变量, 占用栈空间.</li><li>宏的展开由预处理器处理, 在预编译(编译之前)时进行, 直接用宏体替换宏名, 占用预编译时间. 函数在执行时才会被调用. 调用时需要保护现场(保存调用者保存的寄存器), 进入函数, 返回主调函数, 恢复现场(恢复寄存器).</li><li>宏会有各种副作用, 这使它难于调试<ul><li>由于简单的展开, ++ &ndash;运算符可能会执行多次</li><li>同样由于简单的展开, 如果不加足够多的括号, 会出很多优先级的问题.</li></ul></li><li>但宏也有很多好处<ul><li>可以在并不直接允许重载的C语言里实现简单的重载(不过用指针等方法也可以实现)</li><li>对于简单而重复多次的功能, 可以大大减小开销, 提升速度</li><li>实现其他奇技淫巧</li></ul></li><li>内联函数(inline)<ul><li>由编译器处理</li><li>用类似宏的方法, 将函数代码直接嵌入到调用处, 不能有循环, 选择等任何复杂结构, 可以节约开销的同时防止宏的一些副作用.</li><li>如果函数不够简单, 编译器会拒绝内联. 在开了某些优化时编译器会自动将一些简单的函数内联.</li></ul></li></ul></li><li>形参出现在函数定义中用来占位,只有在调用时分配内存. 实参出现在函数调用时.在函数调用时实参的值被传递给形参.</li></ul><h2 id=cc的n和stdendl是否刷新缓冲区的问题>C/C++的&rsquo;\n&rsquo;和std::endl是否刷新缓冲区的问题<a hidden class=anchor aria-hidden=true href=#cc的n和stdendl是否刷新缓冲区的问题>#</a></h2><p>如果cout输出到一个交互设备(interactive device), 如终端(terminal), 它们通常是行缓冲而非完全缓冲的, 所以&rsquo;\n&rsquo;会刷新缓冲区, 但如文件这种完全缓冲的目标, &lsquo;\n&rsquo;不会刷新缓冲区.
我提出这个问题并空想一番之后被M4tsuri丢了两个StackOverflow链接, 我去面壁了&mldr;<br><a href=https://stackoverflow.com/questions/5229096/does-printf-always-flush-the-buffer-on-encountering-a-newline>Does printf always flush the buffer on encountering a newline</a><br><a href=https://stackoverflow.com/questions/42430701/does-new-line-character-also-flush-the-buffer>does new line character also flush the buffer</a></p></div><footer class=post-footer><ul class=post-tags></ul><nav class=paginav><a class=prev href=https://juicymio.github.io/posts/odd_ones/><span class=title>« Prev</span><br><span>二进制数中1的个数是否为奇数</span>
</a><a class=next href=https://juicymio.github.io/posts/pwnable.kr/><span class=title>Next »</span><br><span>Pwnable.kr</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2024 <a href=https://juicymio.github.io/>JuicyMio's Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>